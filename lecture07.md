# 第７回講座
講座内で紹介されたセキュリティ対策について抜粋

### 脆弱性に対するセキュリティ対策

* CodeGuru Reviewer
    * コードをスキャンし、改善を提案
    * Java、Python、JavaScriptに対応

* AWS WAF（Web Application Firewal）
    * Webアプリケーションの脆弱性を突いた攻撃に対して動作し、不正なリクエスを検知・無効化する
    * AWSManagedRulesCommonRuleSet：AWS WAFのうち、ウェブアプリケーションに一般的に適用できるルールグループ。OWASP Top 10がサポートされており、これを使用することが前提ということはAWSでは推奨されている。

* ACM(AWS Certificate Manager) Certificate:証明書
    * SSL証明書を発行するサービス

* Inspector：検査官や監視員という意味
    * OSやミドルウェアの脆弱性検索するサービス

* SSM Patch Manager 
    * パッチの自動化支援

* AWS Security Hub
    * AWSの設定情報を検索して、脆弱な部分を指摘する


### 認証情報の流出に対するセキュリティ対策

* KMS（AWS Key Management Service）
    * 暗号鍵マネージドサービス

* Secrets Manager
    * 秘匿しなければいけない情報をKMSで暗号化して安全に保管、呼び出しするサービス

### 人為的な過負荷に対するセキュリティ対策

* AWS Shield
    * DDoS攻撃からインフラを保護するマネージドサービス　※DDoS（Distributed Denial of Service）攻撃：複数の端末からのDoS攻撃
    * 無料と有料（Advanced）のプランがある

### その他のサービス
* IAM Access Analyzer
    * 各種ポリシーのチェックを行い、大きな権限を与えていないかを確認

* GuardDuty
    * AWS内のイベントをチェックし、セキュリティインシデントの疑いがあるイベントについて指摘

* Macie
    * S3バケットに個人情報やクレジットカード番号など機密情報が含まれないかを検知

* Detective
    * 複数のAWSサービスを横断して、セキュリティインシデントの発生元などを特定するためのGUIを提供

* Network Firawall
    * インターネットゲートウェイとVPCの境界に設置するファイアーウォールを実現するサービス各種ポリシーのチェックを行い、大きな権限を与えていないかを確認


## 現在課題で作成している環境の脆弱性
* URLの先頭が`http://`であり、SSL接続を採用していない。そのため通信が暗号されておらず第三者に情報が漏れたり、改ざんされるリスクがある。

* IAMユーザーの権限がAdministratorAccessのため広範囲に権限が許可されている。

## どのような対策がとれるか
* AWS WAFを（AWSManagedRulesCommonRuleSet）利用する。
* SSL証明書を発行する＋リスナールールで HTTP アクセスを HTTPS に転送するルールを追加する。
* IAMユーザーの権限を必要最低限にする。

* 課題ではサンプルアプリケーションを使用しておりアプリケーションコードやモジュール、ライブラリにおける脆弱性の評価は不明であるが、アプリケーションにおける脆弱性を懸念する場合はDependabotやCodeGuru Reviewerを活用する。


## 感想
一般的にはセキュリティ対策とひとくくりにされていても、何に対する対策か（脆弱性、認証情報の流出、人為的過負荷）に分類され、その中でも細分化され各々に対する対策やサービスが必要であることを学びました。
権限許可について、本講座を聞くまではIAMユーザーの権限は「大は小を兼ねる」の考え方で一つのユーザーに多くの権限を許可すれば管理も容易でいいだろうと思っていました。しかし、セキュリティ面ではその考えはかなりのリスクがあることを認識しました。
また、講座時に質問した際に、講師よりセキュリティ対策は利益を生まないというお話があり、セキュリティ対策のコストとセキュリティリスクの受容のバランスが現場では必要なのだろうと感じました。どのセキュリティ対策を導入するかは状況によって優先順位が変わってくるとのこと。
講座後にAWS WAFのサイトを閲覧したがルールの多さに驚きました。ルール名やルールの説明といった詳細を理解するのはだいぶ先だと感じましたが用途に応じたルールグループがあることを知りました。

